<!DOCTYPE html>
<!--
===============================================================================
PROJECT: Interactive Verilog Waveform Simulator - Group 1
FILE: interactive_verilog_waves.html
DESCRIPTION: Professional waveform viewer for Boolean function simulation
FEATURES: 
  - Interactive digital waveforms with Plotly.js
  - Engineering color scheme (mechanical/industrial)
  - Truth table generation and verification
  - VCD file export capability
  - Responsive design with hover interactions
AUTHOR: Group 1 Team
DATE: August 2025  
VERSION: 2.0
DEPENDENCIES: Plotly.js CDN
===============================================================================
-->
<html lang="en">
<head>
    <!-- Basic HTML5 setup -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Verilog Waveform Viewer</title>
    
    <!-- External library for interactive plotting -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    
    <!-- CSS STYLES - Engineering Color Palette -->
    <style>
    /*========================================================================
      ENGINEERING COLOR PALETTE THEME
      - Professional mechanical/industrial colors
      - High contrast for readability  
      - Suitable for technical presentations
    ========================================================================*/
    
    /* Main body styling with engineering color scheme */
    body { 
        font-family: 'Courier New', monospace;  /* Monospace for technical look */
        margin: 0; 
        padding: 20px; 
        background: #2c3e50;                    /* Dark blue-gray background */
        color: #ecf0f1;                         /* Light gray text */
    }
    
    /* Main container with responsive width */
    .container { 
        max-width: 1400px; 
        margin: 0 auto; 
    }
    
    /* Header section with team information */
    .header { 
        text-align: center; 
        margin-bottom: 30px; 
        border: 2px solid #34495e;              /* Steel gray border */
        padding: 15px;
        background: #34495e;                    /* Slate background */
        box-shadow: 0 4px 8px rgba(0,0,0,0.3); /* Professional shadow */
    }
    
    /* Team information box */
    .team-info {
        background: #34495e;                    /* Consistent slate background */
        padding: 10px;
        margin: 10px 0;
        border-radius: 5px;
        border-left: 4px solid #e74c3c;        /* Red accent border */
        font-size: 14px;
    }
    
    /* Waveform display container */
    .waveform-container { 
        background: #34495e;                    /* Slate background */
        border: 1px solid #7f8c8d;             /* Gray border */
        border-radius: 8px; 
        margin: 20px 0; 
        padding: 15px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }
    .controls {
        margin: 15px 0;
        text-align: center;
    }
    button {
        background: #3498db;
        color: #ffffff;
        border: none;
        padding: 8px 15px;
        margin: 0 5px;
        cursor: pointer;
        border-radius: 4px;
        font-family: monospace;
        box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
    button:hover { 
        background: #2980b9; 
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }
    .status { 
        color: #f39c12; 
        text-align: center; 
        font-size: 14px;
        margin: 10px 0;
    }
    .truth-table {
        background: #34495e;
        border: 1px solid #7f8c8d;
        border-radius: 8px;
        padding: 15px;
        margin: 20px 0;
        overflow-x: auto;
        box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }
    table { 
        width: 100%;
        border-collapse: collapse; 
        color: #ecf0f1;
    }
    th, td { 
        border: 1px solid #7f8c8d; 
        padding: 8px; 
        text-align: center; 
    }
    th { background: #2c3e50; color: #bdc3c7; }
    .high-val { color: #27ae60; font-weight: bold; }
    .low-val { color: #e74c3c; font-weight: bold; }
    .waveform-plot { 
        width: 100%; 
        height: 600px; 
        background: #000; 
    }
</style>
</head>
<body>
<div class="container">
    <div class="header">
        <h1> Interactive Verilog Waveform Simulator</h1>
        <h2>Boolean Function: F = (B & D) | (~B & ~D)</h2>
        <div class="team-info">
            <strong> Project Team:</strong> Group 1<br>
           
        </div>
        <div class="status" id="status"> Initializing Simulation...</div>
    </div>
    
    <div class="controls">
        <button onclick="runSimulation()"> Run Simulation</button>
        <button onclick="resetWaveforms()"> Reset</button>
        <button onclick="toggleZoom()"> Zoom</button>
    </div>
    
    <div class="waveform-container">
        <h3>Digital Waveform Display</h3>
        <div id="waveformPlot" class="waveform-plot"></div>
    </div>
    
    <div class="truth-table">
        <h3> Simulation Truth Table</h3>
        <table id="truthTable">
            <thead>
                <tr><th>Time (ns)</th><th>A</th><th>B</th><th>C</th><th>D</th><th>F</th><th>Logic State</th><th>Description</th></tr>
            </thead>
            <tbody id="truthTableBody"></tbody>
        </table>
    </div>
</div>

<!--
===============================================================================
JAVASCRIPT SECTION - SIMULATION ENGINE
===============================================================================
This section contains all the interactive functionality:
1. Boolean function implementation and verification
2. Waveform data generation with timing
3. Interactive plot creation using Plotly.js  
4. User interface controls (run, reset, zoom, export)
5. Truth table generation and display
6. VCD file export for external waveform viewers
===============================================================================
-->
<script>
//=============================================================================
// GLOBAL VARIABLES - Simulation State Management
//=============================================================================
let simulationRunning = false;      // Flag to prevent multiple simulations
let currentZoom = 1;                // Current zoom level (1x or 2x)

//=============================================================================
// CORE BOOLEAN FUNCTION IMPLEMENTATION
//=============================================================================
/**
 * Boolean function: F = (B & D) | (~B & ~D)
 * Implements XNOR logic between inputs B and D
 * @param {number} A - Input A (0 or 1) - doesn't affect output
 * @param {number} B - Input B (0 or 1) - primary input
 * @param {number} C - Input C (0 or 1) - doesn't affect output  
 * @param {number} D - Input D (0 or 1) - primary input
 * @returns {number} F - Output (0 or 1)
 */
function booleanFunction(A, B, C, D) {
    // JavaScript implementation of Verilog: assign F = (B & D) | (~B & ~D);
    return ((B && D) || (!B && !D)) ? 1 : 0;
}

//=============================================================================
// WAVEFORM DATA GENERATION
//=============================================================================

//=============================================================================
// WAVEFORM DATA GENERATION
//=============================================================================
/**
 * Generate time-based waveform data for all signals
 * Creates step-function waveforms with proper timing
 * @returns {Object} Object containing timePoints and signals arrays
 */
function generateWaveformData() {
    const timePoints = [];                    // Time axis values (nanoseconds)
    const signals = {A: [], B: [], C: [], D: [], F: []};  // Signal value arrays
    
    // Generate waveforms for all 16 input combinations (0000 to 1111)
    for (let i = 0; i < 16; i++) {
        // Extract individual bits from counter i
        const A = (i >> 3) & 1;              // Bit 3 (MSB) - changes every 8 steps
        const B = (i >> 2) & 1;              // Bit 2 - changes every 4 steps
        const C = (i >> 1) & 1;
        const D = i & 1;
        const F = booleanFunction(A, B, C, D);
        
        // Add start time
        timePoints.push(i * 10);
        signals.A.push(A);
        signals.B.push(B);
        signals.C.push(C);
        signals.D.push(D);
        signals.F.push(F);
        
        // Add end time (for step function)
        if (i < 15) {
            timePoints.push((i + 1) * 10 - 0.1);
            signals.A.push(A);
            signals.B.push(B);
            signals.C.push(C);
            signals.D.push(D);
            signals.F.push(F);
        }
    }
    
    return { timePoints, signals };
}

// Create professional waveform plot
function createWaveformPlot() {
    const { timePoints, signals } = generateWaveformData();
    
    const traces = [
        {
            x: timePoints,
            y: signals.A.map(v => v + 4.5),
            type: 'scatter',
            mode: 'lines',
            name: 'A (MSB)',
            line: { shape: 'hv', color: '#34495e', width: 3 },
            hovertemplate: 'A: %{text}<br>Time: %{x}ns<extra></extra>',
            text: signals.A
        },
        {
            x: timePoints,
            y: signals.B.map(v => v + 3.5),
            type: 'scatter',
            mode: 'lines',
            name: 'B',
            line: { shape: 'hv', color: '#2980b9', width: 3 },
            hovertemplate: 'B: %{text}<br>Time: %{x}ns<extra></extra>',
            text: signals.B
        },
        {
            x: timePoints,
            y: signals.C.map(v => v + 2.5),
            type: 'scatter',
            mode: 'lines',
            name: 'C',
            line: { shape: 'hv', color: '#16a085', width: 3 },
            hovertemplate: 'C: %{text}<br>Time: %{x}ns<extra></extra>',
            text: signals.C
        },
        {
            x: timePoints,
            y: signals.D.map(v => v + 1.5),
            type: 'scatter',
            mode: 'lines',
            name: 'D (LSB)',
            line: { shape: 'hv', color: '#f39c12', width: 3 },
            hovertemplate: 'D: %{text}<br>Time: %{x}ns<extra></extra>',
            text: signals.D
        },
        {
            x: timePoints,
            y: signals.F.map(v => v + 0.5),
            type: 'scatter',
            mode: 'lines',
            name: 'F (OUTPUT)',
            line: { shape: 'hv', color: '#e74c3c', width: 4 },
            hovertemplate: 'F: %{text}<br>Time: %{x}ns<extra></extra>',
            text: signals.F
        }
    ];

    const layout = {
        title: {
            text: ' Digital Waveform - Boolean Function Simulation',
            font: { color: '#ecf0f1', size: 18 }
        },
        xaxis: {
            title: 'Time (nanoseconds)',
            gridcolor: '#7f8c8d',
            color: '#ecf0f1',
            showgrid: true,
            zeroline: false,
            tickmode: 'linear',
            tick0: 0,
            dtick: 10
        },
        yaxis: {
            title: 'Signal Levels',
            gridcolor: '#7f8c8d',
            color: '#ecf0f1',
            tickmode: 'array',
            tickvals: [1, 2, 3, 4, 5],
            ticktext: ['F', 'D', 'C', 'B', 'A'],
            range: [0, 6],
            showgrid: true,
            zeroline: false
        },
        plot_bgcolor: '#34495e',
        paper_bgcolor: '#2c3e50',
        font: { color: '#ecf0f1' },
        legend: {
            font: { color: '#ecf0f1' },
            bgcolor: '#34495e',
            bordercolor: '#7f8c8d',
            borderwidth: 1
        },
        hovermode: 'x unified'
    };

    const config = {
        responsive: true,
        displayModeBar: true,
        modeBarButtonsToAdd: ['pan2d', 'select2d', 'lasso2d', 'autoScale2d'],
        modeBarButtonsToRemove: ['toImage']
    };

    Plotly.newPlot('waveformPlot', traces, layout, config);
}

// Generate truth table
function generateTruthTable() {
    const tableBody = document.getElementById('truthTableBody');
    tableBody.innerHTML = '';
    
    for (let i = 0; i < 16; i++) {
        const A = (i >> 3) & 1;
        const B = (i >> 2) & 1;
        const C = (i >> 1) & 1;
        const D = i & 1;
        const F = booleanFunction(A, B, C, D);
        
        const row = tableBody.insertRow();
        row.insertCell().textContent = `${i * 10}`;
        row.insertCell().innerHTML = `<span class="${A ? 'high-val' : 'low-val'}">${A}</span>`;
        row.insertCell().innerHTML = `<span class="${B ? 'high-val' : 'low-val'}">${B}</span>`;
        row.insertCell().innerHTML = `<span class="${C ? 'high-val' : 'low-val'}">${C}</span>`;
        row.insertCell().innerHTML = `<span class="${D ? 'high-val' : 'low-val'}">${D}</span>`;
        row.insertCell().innerHTML = `<span class="${F ? 'high-val' : 'low-val'}">${F}</span>`;
        
        let logicState = '';
        if (F === 1) {
            if (B === 1 && D === 1) logicState = 'BD = 1';
            else if (B === 0 && D === 0) logicState = "B'D' = 1";
        } else {
            logicState = 'B ≠ D';
        }
        row.insertCell().textContent = logicState;
        
        const description = F ? 'HIGH (Logic 1)' : 'LOW (Logic 0)';
        row.insertCell().textContent = description;
    }
}

// Control functions
function runSimulation() {
    if (simulationRunning) return;
    
    simulationRunning = true;
    document.getElementById('status').innerHTML = ' Running Simulation...';
    
    setTimeout(() => {
        createWaveformPlot();
        generateTruthTable();
        document.getElementById('status').innerHTML = ' Simulation Complete - Function Verified!';
        simulationRunning = false;
    }, 500);
}

function resetWaveforms() {
    Plotly.purge('waveformPlot');
    document.getElementById('truthTableBody').innerHTML = '';
    document.getElementById('status').innerHTML = ' Ready to simulate...';
}

function toggleZoom() {
    currentZoom = currentZoom === 1 ? 2 : 1;
    const update = {
        'xaxis.range': currentZoom === 2 ? [0, 80] : [0, 160]
    };
    Plotly.relayout('waveformPlot', update);
}

function exportData() {
    let vcdData = '$timescale 1ns $end\\n';
    vcdData += '$var wire 1 A A $end\\n';
    vcdData += '$var wire 1 B B $end\\n';
    vcdData += '$var wire 1 C C $end\\n';
    vcdData += '$var wire 1 D D $end\\n';
    vcdData += '$var wire 1 F F $end\\n';
    vcdData += '$enddefinitions $end\\n';
    
    for (let i = 0; i < 16; i++) {
        const A = (i >> 3) & 1;
        const B = (i >> 2) & 1;
        const C = (i >> 1) & 1;
        const D = i & 1;
        const F = booleanFunction(A, B, C, D);
        
        vcdData += `#${i * 10}\\n`;
        vcdData += `${A}A\\n${B}B\\n${C}C\\n${D}D\\n${F}F\\n`;
    }
    
    const blob = new Blob([vcdData], { type: 'text/plain' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'boolean_function.vcd';
    a.click();
    URL.revokeObjectURL(url);
    
    document.getElementById('status').innerHTML = ' VCD file exported successfully!';
}

//=============================================================================
// PAGE INITIALIZATION
//=============================================================================
/**
 * Initialize the simulator when page loads
 * Sets up initial UI state and status messages
 */
document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('status').innerHTML = '⚡ Ready to simulate - Click Run Simulation!';
    
    // Optional: Add keyboard shortcuts
    document.addEventListener('keydown', function(event) {
        if (event.ctrlKey && event.key === 'r') {
            event.preventDefault();
            runSimulation();
        }
    });
});

//=============================================================================
// FUNCTION SUMMARY - Complete Interactive Simulator
//=============================================================================
/*
MAIN FUNCTIONS:
1. booleanFunction(A,B,C,D) - Core logic implementation
2. generateWaveformData() - Creates timing and signal data  
3. createWaveformPlot() - Builds interactive Plotly.js waveforms
4. generateTruthTable() - Creates HTML verification table
5. runSimulation() - Main simulation execution
6. resetWaveforms() - Clears display and resets UI
7. toggleZoom() - Switches between 1x and 2x zoom levels
8. exportData() - Generates VCD file for external tools

FEATURES:
- Professional engineering color scheme
- Interactive hover tooltips on waveforms  
- Truth table with logic state explanations
- VCD export for ModelSim/GTKWave compatibility
- Responsive design for different screen sizes
- Real-time simulation status updates

USAGE:
1. Click "Run Simulation" to generate waveforms
2. Hover over waveforms to see exact values
3. Use zoom controls for detailed timing analysis  
4. Export VCD files for external waveform viewers
5. Reset to clear and start over

GROUP 1 - Digital Logic Design Project
Boolean Function: F = (B & D) | (~B & ~D)
*/
//=============================================================================

</script>
</body></html>
